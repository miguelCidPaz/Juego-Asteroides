package ObjetosdeJuego;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;

import Estados.GameState;
import Graficos.Animacion;
import Graficos.Assets;
import Graficos.Sonido;
import Input.KeyBoard;
import maths.Vector2D;

public class Player extends ObjetosMoviles {
	
	private Vector2D heading;
	private Vector2D aceleracion;
	private boolean acelerando=false;
	private long fireRate;
	
	private boolean spawning, visible;
	private long reaparicion, parpadeo, tiempoEscudo, tiempoDoblePuntaje, tiempoDisparoRapido, tiempoDisparoDoble;
	private Sonido sonidoDisparo, looser;
	
	private Animacion efectoEscudo;
	
	
	public Player(Vector2D position, Vector2D velocidad, double maxVel, BufferedImage texture, GameState gameState) {
		super(position, velocidad, maxVel, texture, gameState);
		// TODO Auto-generated constructor stub
		heading = new Vector2D(0,1);
		aceleracion = new Vector2D();
		fireRate = 0;
		
		reaparicion = 0; parpadeo = 0; tiempoEscudo = 0; tiempoDoblePuntaje = 0;
		tiempoDisparoRapido = 0; tiempoDisparoDoble = 0;
		
		sonidoDisparo = new Sonido(Assets.playerShoot);
		looser = new Sonido(Assets.playerLoose);
		
		efectoEscudo = new Animacion(Assets.escudo,80,null);
		
		visible = true;
	}

	@Override
	public void update (float dt) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void draw(Graphics g) {
		// TODO Auto-generated method stub
		if(!visible) {
			return;
		}
		
		Graphics2D g2d = (Graphics2D)g;
		
		AffineTransform at1 = AffineTransform.getTranslateInstance(position.getX()+width/2+5, position.getY()+height/2+10);
		AffineTransform at2 = AffineTransform.getTranslateInstance(position.getX()+5, position.getY()+height/2+10);
		
		at1.rotate(angulo,-5,-10);
		at2.rotate(angulo, width/2-5,-10);
				
		if(acelerando) {
			g2d.drawImage(Assets.propulsion, at1, null);
			g2d.drawImage(Assets.propulsion, at2, null);				
		}
		
		at = AffineTransform.getTranslateInstance(position.getX(), position.getY());
		at.rotate(angulo, width/2, height/2);
		
		g2d.drawImage(texture, at, null);
	}
	
	public boolean isSpawning() {return spawning;}
	
}
